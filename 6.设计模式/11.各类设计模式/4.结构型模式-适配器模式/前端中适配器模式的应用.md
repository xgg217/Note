# 前端中适配器模式的应用

## 示例1

+ 假设我们使用 Google 地图和 Baidu 地图来展示地图信息，两个地图服务商都提供了一个名为 show 的方法，那么我们的 render 方法也就非常简单，在内部直接调用 show 方法进行渲染即可

  ```js
  const googleMap = {
    show: function () {
      console.log("开始渲染谷歌地图");
    },
  };
  const baiduMap = {
    show: function () {
      console.log("开始渲染百度地图");
    },
  };
  const renderMap = function (map) {
    if (map.show instanceof Function) {
      map.show();
    }
  };
  renderMap(googleMap); // 输出：开始渲染谷歌地图
  renderMap(baiduMap); // 输出：开始渲染百度地图

+ 现在，假设有一个第三方地图，该地图提供的接口方法名不叫 show，而是 display

  ```js
  const googleMap = {
    show: function () {
      console.log("开始渲染谷歌地图");
    },
  };
  const baiduMap = {
    show: function () {
      console.log("开始渲染百度地图");
    },
  };
  const gaodeMap = {
    display: function () {
      console.log("开始渲染百度地图");
    },
  }

  // 通用的渲染方法
  const renderMap = function (map) {
    if (map.show instanceof Function) {
      map.show();
    }
  };

  // 那么接下来我们就需要创建一个适配器
  const gaodeMapAdapter = {
    show: function(){
      return gaodeMap.display();
    }
  }

  renderMap(gaodeMapAdapter);
  ```

## 示例2

+ 设我们正在编写一个渲染广东省地图的页面。目前从第三方资源里获得了广东省的所有城市以及它们所对应的 ID，并且成功地渲染到页面中：

  ```js
  // 对应的数据格式
  const guangdongCity = [
    {
      name: "shenzhen",
      id: 11,
    },
    {
      name: "guangzhou",
      id: 12,
    },
  ];
  const render = function (fn) {
    console.log("开始渲染广东省地图");
    // 具体逻辑省略，但是具体的渲染逻辑依赖于
    // [{name: "shenzhen", id: 11}, {name: "guangzhou", id: 12}] 这种数据结构
  };
  render(guangdongCity);
  ```

+ 但是过了一段时间后，你发现上面的数据缺少了一些城市信息，同时你在网上找到了一份更全面的数据信息，但是这份更全面的数据信息，格式和之前有所不同：

  ```js
  const guangdongCity = {
    shenzhen: 11,
    guangzhou: 12,
    zhuhai: 13,
  };
  ```

+ 这里要解决上面的问题，我们就需要添加一个数据格式转换的适配器，对数据格式进行转换，而非去改渲染逻辑

  ```js
  const guangdongCity = {
    shenzhen: 11,
    guangzhou: 12,
    zhuhai: 13,
  };

  const render = function (fn) {
    console.log("开始渲染广东省地图");
    // 具体逻辑省略，但是具体的渲染逻辑依赖于
    // [{name: "shenzhen", id: 11}, {name: "guangzhou", id: 12}] 这种数据结构
  };

  const adapter = function(oldAddressFormat){
    // 进行一个数据格式的转换
    const address = [];
    Object.entries(oldAddressFormat).forEach(([cityName, cityId])=>{
      address.push({
        name: cityName,
        id: cityId
      })
    });
    return address;
  }

  render(adapter(guangdongCity));
  ```
