# 第三方库

## mitt

+ 安装

  ```js
  npm install --save mitt
  ```

+ 引入

  ```js
  // using ES6 modules
  import mitt from 'mitt'

  // using CommonJS modules
  var mitt = require('mitt')
  ```

+ ts

  ```js
  import mitt, { Emitter } from 'mitt';

  type Events = {
    foo: string;
    bar?: number;
  };

  const emitter: Emitter<Events> = mitt<Events>();
  ```

+ 使用

  ```js
  import mitt from 'mitt'

  const emitter = mitt()

  // 添加事件
  emitter.on('foo', e => console.log('foo', e) )

  // 监听所有事件
  emitter.on('*', (type, e) => console.log(type, e) )

  // 派发(通过事件总线对象发送一个事件，并传递需要改变的数据)
  emitter.emit('foo', { a: 'b' })

  // 取消所有事件
  emitter.all.clear()

  // working with handler references:
  function onFoo() {}
  emitter.on('foo', onFoo)   // listen

  // 取消监听(off)
  emitter.off('foo', onFoo)  // unlisten
  ```

+ 在项目中使用

  ```js
  // 项目中创建一个新的 mitt.js 文件，用于导出一个全局的事件总线实例：
  import mitt from "mitt";
  const emitter = mitt();
  export default emitter;
  ```


  ```html
  <!-- 需要的组件中导入全局的事件总线实例，并在需要的地方发布和订阅事件即可 -->
  <!-- ComponentA.vue -->
  <template>
    <div @click="toMessage">我是A组件</div>
  </template>

  <script setup lang="ts">
  import emitter from "@/tool/mitt";
  const toMessage = () => {
    emitter.emit("message", "A组件的数据");
  };
  ```

  ```html
  <!-- ComponentB.vue -->
  <template>
    <div>我是B组件</div>
  </template>
  <script setup lang="ts">
  import emitter from "@/tool/mitt";

  emitter.on("message", (data: any) => {
    console.log(data); //A组件的数据
  });
  </script>
  ```
