# Promise规范

## 概述

+ Promise 是一套专门处理异步场景的规范，他能有效的避免回调地狱的产生，使异步场景更加清晰、简洁、统一

+ 这套规范最早诞生于前端社区，规范名称为 Promise A+

## Promise A+规定

1. 所有的异步场景都可以看作是一个异步任务，每个异步任务，在JS中应该表现为一个对象，该对象称之为 Promise对象，也叫做任务对象

2. 每个任务对象，应该有两个阶段、三个状态

    1. 未决阶段 unsettled  —> 挂起状态 `pending`

    2. 已决阶段 settled —> 完成状态 `fulfilled`、失败状态 `rejected`

        ![模型](image/模型.png)

    3. 根据常理，它们之间存在一下逻辑

          - 任务总是从未决阶段变到已决阶段，无法逆行

          - 任务总是从挂起状态变到完成或失败状态，无法逆行

          - 时间不能倒流，历史不可改写，任务一旦完成或失败，状态就固定下来，永远无法改变

3. `挂起` —> `完成`，称之为 `resolve`；`挂起` —> `失败` 称之为 `reject`。任务完成时，可能有一个相关数据；任务失败时，可能有一个失败的原因

4. 可以针对任务进行后续处理。针对完成状态的后续处理称之为 `onFulfilled`。针对失败的后续处理 `onRejected`
