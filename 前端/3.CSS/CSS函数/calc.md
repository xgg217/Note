# calc

## 概述

*   此 `calc()` 函数用一个表达式作为它的参数，用这个表达式的结果作为值

## 语法

*   `property: calc(expression)`

    ```css
    width: calc(100% - 80px);
    ```

*   支持操作符

    *   `+`

    *   `-`

    *   `*`：乘数中至少又有个 `number`

    *   `/`：除数（`/` 右面的数）必须是 `number` 类型

## 注意点

*   `+` 和 `-` 运算符的两边必须要有空白字符。

    *   比如，`calc(50% -8px)` 会被解析成为一个无效的表达式，解析结果是：一个百分比 后跟一个负数长度值。

    *   而加有空白字符的、有效的表达式 `calc(8px + -50%)` 会被解析成为：一个长度 后跟一个加号 再跟一个负百分比。

*   `*` 和 `/` 这两个运算符前后不需要空白字符，但如果考虑到统一性，仍然推荐加上空白符。

*   用 `0` 作除数会使 HTML 解析器抛出异常。

*   涉及自动布局和固定布局的表格中的表列、表列组、表行、表行组和表单元格的宽度和高度百分比的数学表达式，`auto` 可视为已指定。

*   `calc()` 函数支持嵌套，但支持的方式是：把被嵌套的 `calc()` 函数全当成普通的括号。（译者注：所以，函数内直接用括号就好了。）

## 使用CSS变量嵌套使用 calc()

*   代码

    ```css
    .foo {
      --widthA: 100px;
      --widthB: calc(var(--widthA) / 2);
      --widthC: calc(var(--widthB) / 2);
      width: var(--widthC);
    }
    ```

*   在所有的变量都被展开后，widthC 的值就会变成 `calc( calc( 100px / 2) / 2)`，然后，当它被赋值给 `.foo` 的 `width` 属性时，所有内部的这些 `calc()`（无论嵌套的有多深）都将会直接被扁平化为一个括号，所以这个 `width` 属性的值就直接相当于 `calc( ( 100px / 2) / 2)` 了，或者说就变成 `25px` 了。&#x20;

*   简而言之：一个 `calc()` 里面的 `calc()` 就仅仅相当于是一个括号。
