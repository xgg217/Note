# 与接口开发结合

## 与接口开发结合

+ 在 Express/Koa 等 Web 框架中，可快速集成 zod 进行接口参数验证：

  ```js
  import express from "express";
  import { z } from "zod";

  const app = express();
  app.use(express.json());

  // 定义查询参数 schema
  const PageSchema = z.object({
    page: z.coerce.number().int().min(1).default(1),
    limit: z.coerce.number().int().min(10).max(100).default(20),
  });

  app.get("/users", (req, res) => {
    // 验证查询参数
    const result = PageSchema.safeParse(req.query);

    if (!result.success) {
      return res.status(400).json({
        error: "无效参数",
        details: result.error.issues,
      });
    }

    // 验证通过，使用转换后的数据
    const { page, limit } = result.data;
    res.json({ page, limit, data: [] });
  });

  app.listen(3000);
  ```
