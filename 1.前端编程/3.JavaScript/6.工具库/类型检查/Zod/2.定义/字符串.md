# 字符串

## 字符串 验证

+ Zod 提供了一些内置的字符串验证和转换 API
+ 执行常见字符串验证：

  ```js
  z.string().max(5);
  z.string().min(5);
  z.string().length(5);
  z.string().regex(/^[a-z]+$/);
  z.string().startsWith("aaa");
  z.string().endsWith("zzz");
  z.string().includes("---");
  z.string().uppercase();
  z.string().lowercase();
  ```

## 字符串 转换

+ 执行简单的字符串转换：

  ```js
  z.string().trim(); // 去除空白
  z.string().toLowerCase(); // 转小写
  z.string().toUpperCase(); // 转大写
  z.string().normalize(); // 规范化 Unicode 字符
  ```

## 字符串格式

+ 验证常见字符串格式

  ```js
  z.email();
  z.uuid();
  z.url();
  z.emoji();         // 验证单个 emoji 字符
  z.base64();
  z.base64url();
  z.nanoid();
  z.cuid();
  z.cuid2();
  z.ulid();
  z.ipv4();
  z.ipv6();
  z.cidrv4();        // ipv4 CIDR 块
  z.cidrv6();        // ipv6 CIDR 块
  z.iso.date();
  z.iso.time();
  z.iso.datetime();
  z.iso.duration();
  ```

## 邮件

+ 验证邮箱地址：

  ```js
  z.email();
  ```

+ 默认情况下，Zod 使用一种相对严格的邮箱正则表达式，设计用来验证包含常见字符的普通邮箱地址
+ 大致相当于 Gmail 采用的规则

  ```js
  /^(?!\.)(?!.*\.\.)([a-z0-9_'+\-\.]*)[a-z0-9_+-]@([a-z0-9][a-z0-9\-]*\.)+[a-z]{2,}$/i
  ```

+ 要自定义邮箱验证行为，可以向 pattern 参数传递一个自定义正则表达式

  ```js
  z.email({ pattern: /your regex here/ });
  ```

+ Zod 导出了一些实用的正则表达式可供使用

  ```js
  // Zod 默认邮箱正则
  z.email();
  z.email({ pattern: z.regexes.email }); // 等价

  // 浏览器用于 input[type=email] 字段的正则
  // https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/email
  z.email({ pattern: z.regexes.html5Email });

  // 经典 emailregex.com 正则 (RFC 5322)
  z.email({ pattern: z.regexes.rfc5322Email });

  // 一个允许 Unicode 的宽松正则 (适用于国际邮箱)
  z.email({ pattern: z.regexes.unicodeEmail });
  ```


