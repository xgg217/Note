# 函数类型

## z.function()

+ Zod 提供了一个 z.function() 实用程序，用于定义经过 Zod 验证的函数。这样，你可以避免将验证代码与业务逻辑混合在一起

  ```js
  const MyFunction = z.function({
    input: [z.string()], // parameters (must be an array or a ZodTuple)
    output: z.number()  // return type
  });

  type MyFunction = z.infer<typeof MyFunction>;
  // (input: string) => number
  ```

## 校验输入

+ 如果你只关心验证输入，则可以省略 output 字段

  ```js
  const MyFunction = z.function({
    input: [z.string()], // parameters (must be an array or a ZodTuple)
  });

  const computeTrimmedLength = MyFunction.implement((input) => input.trim.length);
  ```

## .implement(func) 校验输入输出

+ 它接受一个函数并返回一个新函数，该函数会自动验证其输入和输出

  ```js
  const MyFunction = z.function({
    input: [z.string()], // parameters (must be an array or a ZodTuple)
    output: z.number()  // return type
  });

  const computeTrimmedLength = MyFunction.implement((input) => {
    // TypeScript knows input is a string!
    return input.trim().length;
  });

  computeTrimmedLength("sandwich"); // => 8
  computeTrimmedLength(" asdf "); // => 4
  ```

+ 如果输入无效，此函数将抛出 ZodError：

  ```js
  computeTrimmedLength(42); // throws ZodError
  ```

## .implementAsync()

+ 使用 .implementAsync() 方法创建异步函数

  ```js
  const computeTrimmedLengthAsync = MyFunction.implementAsync(
    async (input) => input.trim().length
  );

  computeTrimmedLengthAsync("sandwich"); // => Promise<8>
  ```


