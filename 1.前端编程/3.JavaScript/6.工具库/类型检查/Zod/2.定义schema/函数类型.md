# 函数类型

## z.function()

+ z.function() : 定义函数签名的 schema。

  + .args(arg1Schema, arg2Schema, ...) 或 .args(z.tuple([arg1Schema, ...])): 定义参数的 schema。
  + .returns(returnSchema): 定义返回值的 schema。
  + .implement(func): 创建一个包装函数，该函数在执行前后会对其参数和返回值进行校验。

  ```js
  import { z } from 'zod';

  const sumFunctionSchema = z.function()
    .args(z.number(), z.number()) // 定义两个参数，都是数字
    .returns(z.number());         // 定义返回值是数字

  type SumFunction = z.infer<typeof sumFunctionSchema>;
  // (arg0: number, arg1: number) => number

  // 使用 .implement 创建一个经过校验的函数
  const safeSum = sumFunctionSchema.implement((a, b) => {
    return a + b;
  });

  console.log(safeSum(5, 10)); // 15
  try {
    // safeSum("5", 10); // 会在参数校验时抛出 ZodError
    // safeSum(5, "10"); // 会在参数校验时抛出 ZodError
  } catch (e) {
    console.error(e.errors);
  }

  // 示例：如果函数实现返回了错误类型
  const faultySum = z.function()
    .args(z.number(), z.number())
    .returns(z.number()) // 期望数字
    .implement((a,b) => {
        // @ts-ignore 为了演示错误返回类型
        return `${a+b}`; // 实际返回字符串
    });

  try {
    // faultySum(1,2); // 会在返回值校验时抛出 ZodError
  } catch (e) {
    console.error("Faulty sum error:", e.errors);
  }

  ```

