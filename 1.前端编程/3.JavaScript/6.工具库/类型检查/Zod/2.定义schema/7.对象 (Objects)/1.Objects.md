# 对象 (Objects)

## z.object

+ z.object({ key: valueSchema, ... }) : 验证数据是否为具有特定属性和对应 schema 的对象

  ```js
  // all properties are required by default
  const Person = z.object({
    name: z.string(),
    age: z.number(),
  });

  type Person = z.infer<typeof Person>;
  // => { name: string; age: number; }
  ```

## 嵌套

+ 嵌套

  ```js
  onst AddressSchema = z.object({
    city: z.string(),
    street: z.string(),
    zipCode: z.string().regex(/^d{6}$/), // 邮政编码必须是 6 位数字
  });

  const UserWithAddressSchema = z.object({
    name: z.string(),
    address: AddressSchema, // 嵌套地址对象
  });
  ```

## 示例

+ 示例：可选 + 嵌套

  ```js
  import { z } from 'zod';

  const UserSchema = z.object({
    id: z.string().uuid(),
    username: z.string().min(3),
    email: z.string().email(),
    age: z.number().positive().optional(), // age 是可选的( >0 )
    isActive: z.boolean().default(true), // isActive 有默认值 true
    address: z.object({ // 嵌套对象
      street: z.string(),
      city: z.string(),
      zipCode: z.string().regex(/^\d{5}(-\d{4})?$/), // 美国邮编格式
    }).optional(),
  });

  type User = z.infer<typeof UserSchema>;
  /*
  推断出的类型 User:
  {
    id: string;
    username: string;
    email: string;
    age?: number | undefined;
    isActive: boolean;
    address?: {
      street: string;
      city: string;
      zipCode: string;
    } | undefined;
  }
  */

  const userData = {
    id: "a1b2c3d4-e5f6-7890-1234-567890abcdef",
    username: "john_doe",
    email: "john.doe@example.com",
    // age 和 address 未提供，因为它们是可选的
  };

  const validationResult = UserSchema.safeParse(userData);
  if (validationResult.success) {
    console.log("用户数据有效:", validationResult.data);
    // validationResult.data.isActive 将会是 true (因为有 default)
  } else {
    console.error("用户数据无效:", validationResult.error.flatten());
  }
  ```
