# 最佳实践

## 注意点1 Getter 不应该有副作用

+ 副作用

  + 修改了全局变量

    ```js
    function effect(){
      document.body.innerText = 'hello';
    }

    // 或者 修改了全局变量
    let val = 1;
    function effect(){
      val = 2; // 修改全局变量，产生副作用
    }
    ```

  + 调用系统 I/O 的 API
  + 发送网络请求
  + 在函数体内修改外部变量的值
  + 使用 console.log 等方法进行输出
  + 调用存在副作用的函数

+ 一个计算属性的声明中应该描述的是根据一个值派生另外一个值，不应该改变其他的状态，也不应该在 getter 中做诸如异步请求、更改DOM一类的操作

## 注意点2 避免直接修改计算属性的值

+ 绝大多数场景下，都应该是读取计算属性的值，而非设置计算属性的值

  + 从计算属性返回的值是派生状态
  + 可以把它看作是一个“临时快照”，每当源状态发生变化时，就会创建一个新的快照
  + 更改快照是没有意义的，因此计算属性的返回值应该被视为只读的，并且永远不应该被更改——应该更新它所依赖的源状态以触发新的计算

