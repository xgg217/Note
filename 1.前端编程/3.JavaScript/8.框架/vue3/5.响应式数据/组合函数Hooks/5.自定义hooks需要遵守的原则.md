# 自定义hooks需要遵守的原则

## 注意点

+ 状态共享问题：不要在自定义Hooks内部创建状态（使用ref或reactive），除非这些状态是暴露给使用者的API的一部分。Hooks应该是无状态的，避免在Hooks内部保存状态

+ 副作用处理不当：副作用（例如API调用、定时器等）应该在生命周期钩子（如onMounted、onUnmounted）中处理。不要在自定义Hooks的参数处理或逻辑中直接执行副作用

+ 过度依赖外部状态：自定义Hooks应尽量减少对外部状态的依赖。如果必须依赖，确保通过参数传递，而不是直接访问组件的状态或其他全局状态

+ 参数验证不足：自定义Hooks应该能够处理无效或意外的参数。添加参数验证逻辑，确保Hooks的鲁棒性

+ 使用不稳定的API：避免使用可能在未来版本中更改或删除的API。始终查阅官方文档，确保你使用的API是稳定的

+ 性能问题：避免在自定义Hooks中进行昂贵的操作，如深度比较或复杂的计算，这可能会影响组件的渲染性能

+ 重渲染问题：确保自定义Hooks不会由于响应式依赖不当而导致组件不必要的重渲染

+ 命名不一致：自定义Hooks应该遵循一致的命名约定，通常是use前缀，以便于识别和使用

+ 过度封装：避免创建过于通用或复杂的Hooks，这可能会导致难以理解和维护的代码。Hooks应该保持简单和直观

+ 错误处理不足：自定义Hooks应该能够妥善处理错误情况，例如API请求失败或无效输入

+ 生命周期钩子滥用：不要在自定义Hooks中滥用生命周期钩子，确保只在必要时使用

+ 不遵循单向数据流：Hooks应该遵循Vue的单向数据流原则，避免创建可能导致数据流混乱的逻辑

+ 忽视类型检查：使用TypeScript编写Hooks时，确保进行了适当的类型检查和类型推断

+ 使用不恰当的响应式API：例如，使用ref而不是reactive，或者在应该使用readonly的场景中使用了可变对象

+ 全局状态管理不当：如果你的Hooks依赖于全局状态，确保正确处理，避免造成状态管理上的混

