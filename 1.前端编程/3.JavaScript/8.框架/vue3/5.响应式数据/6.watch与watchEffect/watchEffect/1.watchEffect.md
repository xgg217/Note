# watchEffect

## 概述

+ `watchEffect` 是 Vue3 的新函数，你可以认为它是 watch 的升级版或加强版，它功能和 `watch` 相似，但却更加强大

+ 功能：它接收一个函数作为参数，并会立即执行传入的函数，同时响应式追踪其依赖，并在其依赖变更时重新运行该函数

  + 是一个用于追踪响应式依赖的函数
  + 它可以让你在一个函数中使用响应式的数据，例如 `ref` 或 `reactive` 创建的对象，然后当这些数据变化时，自动重新执行这个函数

+ `watchEffect` 会被立即执行(可以认为 `immediate: true`)，并且不管是修改 name 还是 age 都会触发 `watchEffect` 执行

+ 可以认为 `watchEffect` 内部使用到什么响应数据，就监听了什么响应数据，只要这些响应数据发生变化，就会触发 `watchEffect`

+ 它相当于将 `watch` 的依赖源和回调函数合并，不需要指定具体要观察的数据

+ 对于只有一个依赖项的场景来讲，watchEffect 的收益不大，但是如果涉及到多个依赖项，那么 watchEffect 的好处就体现出来了

+ watchEffect 相比 watch 还有一个特点：如果你需要侦听一个嵌套的数据结构的几个属性，那么 watchEffect 只会侦听回调中用到的属性，而不是递归侦听所有的属性
