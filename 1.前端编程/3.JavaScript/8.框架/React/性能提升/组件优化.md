# 组件优化

## 优化思路

1. 减少重新 `render` 的次数。因为在 React 里最重(花时间最长)的一块就是 `reconction` (简单的可以理解为 `diff` )，如果不 `render`，就不会 `reconction`

2. 减少计算的量。主要是减少重复计算，对于函数式组件来说，每次 `render` 都会重新从头开始执行函数调用

3. 合理拆分组件：微服务的核心思想是：以更轻、更小的粒度来纵向拆分应用，各个小应用能够独立选择技术、发展、部署。我们在开发组件的过程中也能用到类似的思想。试想当一个整个页面只有一个组件时，无论哪处改动都会触发整

## 类组件优化

+ API :减少重新 `render` 的次数

+ `shouldComponentUpdate`

+ `PureComponent`

+ 主要是减少父组件更新而子组件也更新的情况

+ 虽然也可以在 `state` 更新的时候阻止当前组件渲染，如果要这么做的话，证明你这个属性不适合作为 `state`，而应该作为静态属性或者放在 class 外面作为一个简单的变量

## 函数组件优化

+ API

+ `React.memo` :对标类组件里面的 `PureComponent`，这是可以减少重新 `render` 的次数的

+ `useCallback`
