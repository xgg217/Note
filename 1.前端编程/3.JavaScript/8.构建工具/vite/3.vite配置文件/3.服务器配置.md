# æœåŠ¡å™¨é…ç½®

## æ¦‚è¿°

+ æœåŠ¡å™¨é…ç½®æ˜¯æŒ‡**å¼€å‘æœåŠ¡å™¨**ï¼Œå¯¹åº”çš„é…ç½®é¡¹æ˜¯ server

+ ä¸€ä¸ªåŸºæœ¬çš„æ ¼å¼å¦‚ä¸‹ï¼š

  ```js
  export default defineConfig({
    server: {
      // ä¼—å¤šé…ç½®é¡¹
    },
  })
  ```

## host

+ æŒ‡å®šæœåŠ¡å™¨åº”è¯¥ç›‘å¬å“ªä¸ª IP åœ°å€ï¼Œé»˜è®¤æ˜¯ `localhost`

+ ç±»å‹ï¼š `string` | `boolean`

+ é»˜è®¤ï¼š `'localhost'`

+ æ€è€ƒğŸ¤” æ­£å¸¸æƒ…å†µä¸‹å°±æ˜¯ localhost å°±å¥½äº†å‘€ï¼Œä»€ä¹ˆæƒ…å†µä¸‹è¿˜å­˜åœ¨è¦ä¿®æ”¹ host çš„æƒ…å†µå‘¢ï¼Ÿ

  + ç­”æ¡ˆï¼šé™¤äº† localhost ä»¥å¤–ï¼Œæˆ‘ä»¬ç»å¸¸è¿˜éœ€è¦è®¾ç½®ä¸º `0.0.0.0` æˆ–è€… `true` ï¼Œè¡¨ç¤ºç›‘å¬æ‰€æœ‰çš„ç½‘ç»œæ¥å£è¯·æ±‚
  + æœ‰äº›æ—¶å€™éœ€è¦å¤šè®¾å¤‡æ¥æµ‹è¯•åº”ç”¨

## port

+ ç›‘å¬çš„ç«¯å£å·ï¼Œé»˜è®¤æ˜¯ 5173

## strictPort

+ é»˜è®¤ä¸º `false`
+ å¦‚æœè®¾ç½®ä¸º `true` ï¼ŒVite å°†**ä¸¥æ ¼ä½¿ç”¨æŒ‡å®šçš„ç«¯å£**
+ å¦‚æœç«¯å£è¢«å ç”¨ï¼ŒæœåŠ¡å™¨å¯åŠ¨å°†å¤±è´¥

## proxy

+ è¿™ä¸ªé…ç½®é¡¹éå¸¸å¸¸ç”¨ï¼Œç”¨äº**é…ç½®ä»£ç†æœåŠ¡å™¨**

  ```js
  export default defineConfig({
    server: {
      proxy: {
        '/foo': 'http://localhost:4567', // å°† '/foo' å‰ç¼€çš„è¯·æ±‚ä»£ç†åˆ° 'http://localhost:4567'
      },
    },
  });
  ```

+ å¯¹åº”çš„å€¼ä¹Ÿå¯ä»¥æ˜¯å¯¹è±¡çš„å½¢å¼ï¼Œå¯¹è±¡å½¢å¼èƒ½å¤ŸåŒ…å«æ›´å¤šçš„é…ç½®é€‰é¡¹ï¼š

  ```js
  export default defineConfig({
    server: {
      proxy: {
        '/api': {
          target: 'http://jsonplaceholder.typicode.com',
          changeOrigin: true,
          rewrite: (path) => path.replace(/^\/api/, ''), // é‡å†™è·¯å¾„ï¼Œå°† '/api' å‰ç¼€å»æ‰
        },
      },
    },
  });
  ```

## open

+ å¯åŠ¨å¼€å‘æœåŠ¡å™¨æ—¶**æ˜¯å¦è‡ªåŠ¨åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€åº”ç”¨**
+ é»˜è®¤å€¼æ˜¯ false

## https

  + æ˜¯å¦å¯ç”¨ HTTPS
  + å¦‚æœæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥æŒ‡å®š **SSL è¯ä¹¦**å’Œ**ç§é’¥**çš„è·¯å¾„

  ```js
  export default defineConfig({
    server: {
      https: {
        key: fs.readFileSync('/path/to/server.key'),
        cert: fs.readFileSync('/path/to/server.crt')
      }
    },
  });
  ```

## watch

+ è‡ªå®šä¹‰æ–‡ä»¶ç›‘è§†å™¨çš„é€‰é¡¹
+ è¿™å¯¹äºå¼€å‘è¿‡ç¨‹ä¸­çš„çƒ­æ¨¡å—æ›¿æ¢ï¼ˆHMRï¼‰éå¸¸å…³é”®
+ èƒŒåå…¶å®ä½¿ç”¨çš„æ˜¯ chokidar(ä¸€ä¸ª Node.js çš„æ–‡ä»¶ç³»ç»Ÿç›‘å¬åº“)ï¼Œå®ƒæä¾›äº†å¤šç§å¯é…ç½®çš„ç›‘å¬é€‰é¡¹

  ```js
  import { defineConfig } from 'vite';

  export default defineConfig({
    server: {
      watch: {
        // ä»»ä½•ä½äº ignored-directory ç›®å½•ä¸‹çš„æ–‡ä»¶
        // æˆ–è€…ä»»ä½•ç›®å½•ä¸‹é¢çš„ some-specific-file.txt æ–‡ä»¶
        // å†…å®¹å‘ç”Ÿæ›´æ”¹éƒ½ä¸ä¼šè§¦å‘ HMR
        ignored: ['**/ignored-directory/**', '**/some-specific-file.txt']
      }
    }
  });
  ```

+ watch è¿˜æ”¯æŒæ›´åŠ ç»†ç²’åº¦çš„æ§åˆ¶ï¼š

  ```js
  import { defineConfig } from 'vite';

  export default defineConfig({
    server: {
      watch: {
        ignored: '**/temp/**', // å¿½ç•¥ temp ç›®å½•
        persistent: true,      // æŒç»­ç›‘å¬å˜åŒ–
        usePolling: true,      // ä½¿ç”¨è½®è¯¢
        interval: 100,         // è½®è¯¢é—´éš” 100 æ¯«ç§’
        binaryInterval: 300    // å¯¹äºäºŒè¿›åˆ¶æ–‡ä»¶çš„è½®è¯¢é—´éš”
      }
    }
  });
  ```

+ å¦‚æœæƒ³è¦å…³é—­æ–‡ä»¶ç›‘å¬ï¼Œç›´æ¥è®¾ç½®ä¸º null å³å¯ï¼š

  ```js
  import { defineConfig } from 'vite';

  export default defineConfig({
    server: {
      watch: null
    }
  });
  ```
