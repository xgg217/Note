# 基础

## 概述

+ `FileReader` 对象允许 Web 应用程序异步读取存储在用户计算机上的文件（或原始数据缓冲区）的内容，使用 `File` 或 `Blob` 对象指定要读取的文件或数据

+ 简单理解，就是用于读取 `File` 对象或 `Blob` 对象所包含的文件内容

  ```js
  let reader = new FileReader(); // 没有参数
  ```

## 注意点

+ FileReader 仅用于以安全的方式从用户（远程）系统读取文件内容 它不能用于从文件系统中按路径名简单地读取文件

+ 要在JavaScript中按路径名读取文件，应使用标准Ajax解决方案进行服务器端文件读取，如果读取跨域，则使用CORS权限

## 示例

+ 直接在浏览器中读取并显示文本文件的内容

  ```html
  <h1>文件读取器</h1>
  <input type="file" id="file-input" />
  <div id="message"></div>
  <pre id="file-content"></pre>

  <script>
    const fileInput = document.getElementById("file-input");
    const fileContentDisplay = document.getElementById("file-content");
    const messageDisplay = document.getElementById("message");

    fileInput.addEventListener("change", handleFileSelection);

    function handleFileSelection(event) {
      const file = event.target.files[0];
      fileContentDisplay.textContent = ""; // 清除之前的文件内容
      messageDisplay.textContent = ""; // 清除之前的消息

      // 验证文件是否存在及其类型
      if (!file) {
        showMessage("未选择文件。请选择一个文件。", "error");
        return;
      }

      if (!file.type.startsWith("text")) {
        showMessage("不支持的文件类型。请选择一个文本文件。", "error");
        return;
      }

      // 读取文件
      const reader = new FileReader();
      reader.onload = () => {
        fileContentDisplay.textContent = reader.result;
      };
      reader.onerror = () => {
        showMessage("读取文件时出错。请重试。", "error");
      };
      reader.readAsText(file);
    }

    // 向用户显示一条消息
    function showMessage(message, type) {
      messageDisplay.textContent = message;
      messageDisplay.style.color = type === "error" ? "red" : "green";
    }
  </script>
  ```
