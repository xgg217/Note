# 实例方法

## 概述

+ `FileReader.abort()`：终止读取操作，readyState 属性将变成2

  ```js
  // 用于中止文件上传
  const reader = new FileReader();
  reader.abort();
  ```

+ `FileReader.readAsArrayBuffer()`：以 ArrayBuffer 的格式读取文件，读取完成后 result 属性将返回一个 ArrayBuffer 实例

+ `FileReader.readAsBinaryString()`：读取完成后， result 属性将返回原始的二进制字符串

+ `FileReader.readAsDataURL()`：读取完成后， result 属性将返回一个 Data URL 格式（Base64 编码）的字符串，代表文件内容

  + 对于图片文件，这个字符串可以用于 `<img>` 元素的 `src` 属性。注意，这个字符串不能直接进行 Base64 解码，必须把前缀 `data:*/*;base64` ,从字符串里删除以后，再进行解码

+ `FileReader.readAsText()`：读取完成后， `result` 属性将返回文件内容的文本字符串

  + 该方法的第一个参数是代表文件的 Blob 实例，第二个参数是可选的，表示文本编码，默认为 `UTF-8`


## readAsArrayBuffer

+ `readAsArrayBuffer` 方法读取文件，返回一个类型化数组（`ArrayBuffer`），即固定长度的二进制缓存数据

+ 在文件操作时（比如将JPEG图像转为PNG图像），这个方法非常方便

  ```js
  var reader = new FileReader();
  reader.onload = function(e) {
    var arrayBuffer = reader.result;
  }

  reader.readAsArrayBuffer(file);
  ```

## readAsBinaryString

+ `readAsBinaryString` 方法可以读取任意类型的文件，而不仅仅是文本文件，返回文件的原始的二进制内容

+ 这个方法与 `XMLHttpRequest.sendAsBinary` 方法结合使用，就可以使用JavaScript上传任意文件到服务器

  ```js
  var reader = new FileReader();
  reader.onload = function(e) {
    var rawData = reader.result;
  }
  reader.readAsBinaryString(file);
  ```

## readAsDataURL

+ `readAsDataURL` 方法返回一个 `data URL` ，它的作用基本上是将文件数据进行Base64编码

+ 你可以将返回值设为图像的 `src` 属性

  ```js
  var file = document.getElementById('destination').files[0];
  if(file.type.indexOf('image') !== -1) {
    var reader = new FileReader();
    reader.onload = function (e) {
      var dataURL = reader.result;
    }
    reader.readAsDataURL(file);
  }
  ```

## readAsText

+ `readAsText` 方法用于读取文本文件，它的第一个参数是 `File` 或 `Blob` 对象，第二个参数是前一个参数的编码方法，如果省略就默认为UTF-8编码

  ```js
  var reader = new FileReader();
  reader.onload = function(e) {
    var text = reader.result;
  }

  reader.readAsText(file, encoding);
  ```
