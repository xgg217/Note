# Mutation Observer API 语法

## 语法

+ `var observer = new MutationObserver(callback);`

+ 参数

  + callback 一个回调函数，每当被指定的节点或子树以及配置项有 DOM 变动时会被调用。回调函数拥有两个参数：一个是描述所有被触发改动的 MutationRecord 对象数组，另一个是调用该函数的 MutationObserver 对象

    ```js
    function callback(mutationList, observer) {
      mutationList.forEach((mutation) => {
        switch (mutation.type) {
          case "childList":
            /* 从树上添加或移除一个或更多的子节点；参见 mutation.addedNodes 与
              mutation.removedNodes */
            break;
          case "attributes":
            /* mutation.target 中某节点的一个属性值被更改；该属性名称在 mutation.attributeName 中，
              该属性之前的值为 mutation.oldValue */
            break;
        }
      });
    }
    ```

+ 返回值

  + 一个新的、包含监听 DOM 变化回调函数的 MutationObserver 对象

  ```js
  var targetNode = document.querySelector("#someElement");
  var observerOptions = {
    childList: true, // 观察目标子节点的变化，是否有添加或者删除
    attributes: true, // 观察属性变动
    subtree: true, // 观察后代节点，默认为 false
  };

  var observer = new MutationObserver((e => {
    console.log(e);
  }););
  observer.observe(targetNode, observerOptions);
  ```
