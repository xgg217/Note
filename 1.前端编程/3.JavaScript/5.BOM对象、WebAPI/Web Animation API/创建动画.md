# 创建动画

## 语法

+ `var myAnimation = element.animate(keyframes, options);`

+ 参数

  + `keyframes` : **关键帧对象**数组 ，或一个关键帧对象（其属性为可迭代值的数组）。可以理解成对应CSS3中 `@keyframes` 中的声明块

    + 详细介绍见下面

  + `options` 代表动画持续时间的整数（以毫秒为单位），或者一个包含一个或多个时间属性

    + 详细介绍见下面

+ 返回值

  + 返回 `Animation`

  ```js
  // 基本使用1
  const newspaperSpinning = [
    { transform: "rotate(0) scale(1)" },
    { transform: "rotate(360deg) scale(0)" },
  ];

  const newspaper = document.querySelector(".newspaper");
    newspaper.addEventListener("click", () => {
    newspaper.animate(newspaperSpinning, {
      duration: 2000,
      fill: "forwards",
    });
  });
  ```

### keyframes 关键帧格式

+ Element.animate()、KeyframeEffect.KeyframeEffect() 和 KeyframeEffect.setKeyframes() 都接受格式为一组关键帧的对象

+ 语法1：数组

  + 一个由多个关键帧的属性和值组成的对象所构成的数组
  + 这是getKeyframes()方法返回的规范格式

    ```js
    element.animate(
      [
        {
          // from
          opacity: 0,
          color: "#fff",
        },
        {
          // to
          opacity: 1,
          color: "#000",
        },
      ],
      2000,
    );
    ```

+ 语法2：对象

  + 一个包含 key-value 键值的对象需要包含动画的属性和要循环变化的值数组

    ```js
    element.animate(
      {
        opacity: [0, 1], // [ from, to ]
        color: ["#fff", "#000"], // [ from, to ]
      },
      2000,
    );
    ```

### options 配置

+ id （可选）:在 `animate()` 里可作为唯一标识的属性：一个用来引用动画的字符串

+ duration (可选): 动画的持续时间，以毫秒为单位

  + 这个属性用于定义动画从开始到结束所需的时间长度
  + 默认值为 0，即瞬时变换

+ easing (可选): 缓动函数，用于定义动画的速度曲线

  + 缓动函数控制动画在整个持续时间内的速度变化
  + 可以是一个字符串，如 `"linear"` 、 `"ease-in"` 、 `"ease-out"` 等，也可以是自定义的 cubic-bezier(0.42, 0, 0.58, 1) 函数
 + 接受 `<easing-function>`  [easing-function](https://developer.mozilla.org/en-US/docs/Web/API/KeyframeEffect/KeyframeEffect)
  + 不同的缓动函数会导致不同的动画效果，从线性过渡到弹簧效果等

+ delay (可选): 动画开始之前的延迟时间，以毫秒为单位

  + 这个属性允许您延迟动画的开始，以实现需要等待一段时间后才开始的效果
  + 默认值为 0，即立即开始

+ `iterationStart`

  + 描述动画应该在迭代的什么时候开始。0.5表示在第一次迭代中途开始，使用这个值集，一个有两次迭代的动画将在第三次迭代中途结束
  + 默认为0.0

+ iterations (可选): 动画的重复次数，可以是一个数字或字符串

  + 默认值为 1，表示动画只执行一次
  + 如果设置为 `"Infinity"` ，则动画将无限重复

+ direction (可选): 动画运动方向

  + 可以是 `"normal"` （正向播放）、 `"reverse"` （反向播放）、 `"alternate"` （正向反向交替播放）或 `"alternate-reverse"` （反向正向交替播放）
  + 这决定了动画是正向还是反向播放，以及是否交替播放

+ fill (可选): 动画结束后是否保持最终状态

  + 可以是 "none"（*默认值* 完成最后一帧时，回到初始值）、"forwards"（停到最后一帧）、"backwards"（回到初始值）或"both"（同时保持初始和最终状态）
  + 这个属性控制动画结束后元素的状态

+ `endDelay`

  + 动画结束后延迟的毫秒数。这主要用于根据另一个动画的结束时间对动画进行排序
  + 默认值为 0

+ `composite`

  + 动画和其他单独的动画之间组合。 这是个高级特性，默认是replace，就是替换提起的动画

+ `iterationComposite`

  + 动画的属性值变化如何在每次动画迭代时累积或相互覆盖

+ `pseudoElement`
