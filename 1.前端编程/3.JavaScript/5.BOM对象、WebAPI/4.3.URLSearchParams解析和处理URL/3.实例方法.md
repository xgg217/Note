# 方法



## .append()

+ `append()` 方法用来追加一个查询参数

+ 语法`append(name, value)`

  + 参数
    + name 要附加的参数的键名
    + value 要附加的参数的值

  + 返回值 无（undefined）

  ```js
  var params = new URLSearchParams({'foo': 1 , 'bar': 2});
  params.append('baz', 3);
  params.toString() // "foo=1&bar=2&baz=3"
  ```

+ `append()` 方法不会识别是否键名已经存在

  ```js
  var params = new URLSearchParams({'foo': 1 , 'bar': 2});
  params.append('foo', 3);
  params.toString() // "foo=1&bar=2&foo=3"
  ```

## .delete()

+ `delete()` 从所有查询参数的列表中删除指定的参数及其关联值

+ 语法

  ```js
  delete(name)
  delete(name, value)
  ```

  + 参数

    + name 需要删除的键值名称

    + value 可选 参数必须匹配的值以及要删除的给定名称

  + 返回值 无（undefined）

  ```js
  const url = new URL("https://example.com?foo=1&bar=2&foo=3");
  const params = new URLSearchParams(url.search);
  log(`查询参数（删除前）：${params}`); // foo=1&bar=2&foo=3
  params.delete("foo");
  log(`查询参数（删除后）：${params}`); // bar=2
  ```

  ```js
  // 删除指定名称和值的所有参数
  const url = new URL("https://example.com?foo=1&bar=2&foo=3&foo=1");
  const params = new URLSearchParams(url.search);
  log(`查询参数（删除前）：${params}`); // foo=1&bar=2&foo=3&foo=1
  params.delete("foo", "1");
  log(`查询参数（删除后）：${params}`); // bar=2&foo=3
  ```

## .has()

+ `has()` 方法返回一个布尔值，表示查询字符串是否包含指定的键名

+ 语法

  ```js
  has(name)
  has(name, value)
  ```

  + 参数

    + name 要匹配的参数的名称

    + value 要匹配的参数值以及给定的名称

  + 返回值 一个布尔值

  ```js
  const url = new URL("https://example.com?foo=1&bar=2&foo=3");
  const params = new URLSearchParams(url.search);

  params.has('bar') // true
  params.has('bark') // false
  params.has('foo') // true
  ```

  ```js
  // 检查具有指定名称和值的参数
  const url = new URL("https://example.com?foo=1&bar=2&foo=3");
  const params = new URLSearchParams(url.search);

  // 如果具有指定名称和值的参数在查询字符串中，则 has() 返回 true
  params.has("bar", "1"); // false
  params.has("bar", "2"); // true
  params.has("foo", "4"); // false
  ```

## .set()

+ `set()` 方法用来设置查询字符串的键值

+ 语法 `set(name, value)`

  + 参数

    + name 要设置的参数的键名

    + value 要设置的参数的值

  + 返回值 无（undefined）

  ```js
  let url = new URL("https://example.com?foo=1&bar=2");
  let params = new URLSearchParams(url.search);

  // 设置第三个参数。
  params.set("baz", 3);
  params.toString(); // "foo=1&bar=2&baz=3"
  ```

+ 如果是已经存在的键，键值会被改写，否则会被追加

  ```js
  var params = new URLSearchParams('?foo=1');
  params.set('foo', 2);
  params.toString() // "foo=2"
  params.set('bar', 3);
  params.toString() // "foo=2&bar=3"
  ```

+ 如果有多个的同名键，set会移除现存所有的键

  ```js
  var params = new URLSearchParams('?foo=1&foo=2');
  params.set('foo', 3);
  params.toString() // "foo=3"
  ```

## .get()

+ `get()` 方法用来读取查询字符串里面的指定键

+ 语法 `get(name)`

  + 参数

    + name 要返回的参数的键名。

  + 返回值 如果找到了给定的查询参数，则返回一个字符串；否则返回 `null`

    ```js
    var params = new URLSearchParams('?foo=1');
    params.get('foo') // "1"
    params.get('bar') // null
    ```

+ 两个地方需要注意

  + 第一，它返回的是字符串，如果原始值是数值，需要转一下类型
  + 第二，如果指定的键名不存在，返回值是 `null`

+ 如果有多个的同名键， `get` 返回位置最前面的那个键值

  ```js
  var params = new URLSearchParams('?foo=3&foo=2&foo=1');

  // 查询字符串有三个foo键，get方法返回最前面的键值3
  params.get('foo') // "3"
  ```

## .getAll()

+ `getAll()` 方法返回一个数组，成员是指定键的所有键值

+ 语法 `getAll(name)`

  + 参数

    + name 要返回的参数的名称。

  + 返回值 一个字符串的数组，如果没有找到给定参数的值，则其可以是空的

  ```js
  var params = new URLSearchParams('?foo=1&foo=2');
  params.getAll('foo') // ["1", "2"]
  ```

## .toString()

+ toString方法返回实例的字符串形式
+ 返回不带问号的查询字符串

  + 这与 Location.search、HTMLAnchorElement.search 和 URL.search 都不同，它们均带有问号

+ 语法 `toString()`

  + 参数 无

  + 返回值 一个不带问号的字符串（如果未设置查询参数，则返回空字符串）

  ```js
  var url = new URL('https://example.com?foo=1&bar=2');
  var params = new URLSearchParams(url.search);

  params.toString() // "foo=1&bar=2'
  ```

## .forEach()

+ 通过回调函数来遍历实例对象上的键值对

+ 语法

  ```js
  forEach(callback)
  forEach(callback, thisArg)
  ```

  + 参数

    + callback 在每个元素上执行的函数，会传入以下参数：

      + value URLSearchParams 对象中正在处理的条目的值。

      + key URLSearchParams 对象中正在处理的条目的键。

      + searchParams 当前调用 forEach() 方法的 URLSearchParams 对象

    + thisArg 可选 执行 callback 时 this 的值

  + 返回值 无（undefined）

  ```js
  const searchParams = new URLSearchParams("key1=value1&key2=value2");

  // 输出值
  searchParams.forEach((value, key) => {
    console.log(value, key);
  });

  value1 key1
  value2 key2
  ```

## .sort()

+ `sort()` 方法对查询字符串里面的键进行排序，规则是按照 `Unicode` 码点从小到大排列

+ 该方法没有返回值，或者说返回值是 `undefined`

  ```js
  var params = new URLSearchParams('c=4&a=2&b=3&a=1');
  params.sort();

  // 如果有两个同名的键a，它们之间不会排序，而是保留原始的顺序
  params.toString() // "a=2&a=1&b=3&c=4"
  ```

## .keys() .values() .entries()

+ 这三个方法都返回一个遍历器对象，供 `for...of` 循环遍历
+ 它们的区别在于，`keys` 方法返回的是键名的遍历器，`values` 方法返回的是键值的遍历器，`entries` 返回的是键值对的遍历器

  ```js
  var params = new URLSearchParams('a=1&b=2');

  for(var p of params.keys()) {
    console.log(p);
  }
  // a
  // b

  for(var p of params.values()) {
    console.log(p);
  }
  // 1
  // 2

  for(var p of params.entries()) {
    console.log(p);
  }
  // ["a", "1"]
  // ["b", "2"]
  ```

+ 如果直接对 `URLSearchParams` 进行遍历，其实内部调用的就是 `entries` 接口

  ```js
  for (var p of params) {}
  // 等同于
  for (var p of params.entries()) {}
  ```
