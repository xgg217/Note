# 基础

## 概述

+ IndexedDB 是一种底层 API，用于在客户端存储大量的结构化数据（也包括文件/二进制大型对象（blobs））
+ 该 API 使用索引实现对数据的高性能搜索
+ 虽然 Web Storage 在存储较少量的数据很有用，但对于存储更大量的结构化数据来说力不从心
+ 而 IndexedDB 提供了这种场景的解决方案

+ 在 Web Worker 中可用

## 使用场景

+ 所有的场景都基于客户端需要存储大量数据的前提下：

  + 数据可视化等界面，大量数据，每次请求会消耗很大性能
  + 即时聊天工具，大量消息需要存在本地
  + 其它存储方式容量不满足时，不得已使用IndexedDB

## 特点

+ 非关系型数据库(NoSql)

  + 键值对储存 IndexedDB 内部采用对象仓库（object store）存放数据
  + 所有类型的数据都可以直接存入，包括 JavaScript 对象
  + 对象仓库中，数据以"键值对"的形式保存，每一个数据记录都有对应的主键，主键是独一无二的，不能有重复，否则会抛出一个错误

+ 支持事务

  + 支持事务 IndexedDB 支持事务（transaction），这意味着一系列操作步骤之中，只要有一步失败，整个事务就都取消，数据库回滚到事务发生之前的状态，不存在只改写一部分数据的情况

+ 异步操作

  + 异步 IndexedDB 操作时不会锁死浏览器，用户依然可以进行其他操作，这与 LocalStorage 形成对比，后者的操作是同步的

  + 异步设计是为了防止大量数据的读写，拖慢网页的表现

+ 支持二进制储存

  + 支持二进制储存 IndexedDB 不仅可以储存字符串，还可以储存二进制数据（ArrayBuffer 对象和 Blob 对象

+ 同源策略

  + 同源限制 IndexedDB 受到同源限制，每一个数据库对应创建它的域名
  + 网页只能访问自身域名下的数据库，而不能访问跨域的数据库

+ 持久化存储

  + cookie、localStorage、sessionStorage等方式存储的数据当我们清楚浏览器缓存后，这些数据都会被清除掉的，而使用IndexedDB存储的数据则不会，除非手动删除该数据库

+ 存储容量大

  + 储存空间大 IndexedDB 的储存空间比 LocalStorage 大得多，一般来说不少于 250MB，甚至没有上限
  + 储 存 在 电 脑 上 中 的 位 置 为 C:\Users\当 前 的 登 录 用 户\AppData\Local\Google\Chrome\User Data\Default\IndexedDB
