# 向量运算

## 方式1 向量和单独数字的运算

+ 向量可以与单独数字进行加减乘除

  ```js
  vec4 v=vec4(1,2,3,4);
  v+=1.0;
  v-=1.0;
  v*=2.0;
  v/=2.0;
  ```

+ vec4 是浮点型向量

  + 写在 `vec4()` 中的整数可以被 `vec4()` 方法转换成浮点数

  + vec4 向量在做四则运算时，其用于运算的数字类型应该是浮点型

    ```js
    // 下面的写法会报错
    v+=1;
    ```

+ 整型向量ivec2、ivec3、ivec4 的运算原理同上

## 方式2 向量和向量的运算

+ 加减乘除

  ```js
  vec4 p=vec4(1,2,3,4);
  vec4 v=vec4(2,4,6,8);
  v+=p;
  v-=p;
  v*=p;
  v/=p;
  ```

+ distance(p0,p1) 向量距离
+ dot(p0,p1) 点积
+ cross(p0,p1) 叉乘

## 方式3 向量和矩阵的运算

+ 矩阵只能与向量进行乘法运算

+ 向量乘以矩阵和矩阵乘以向量的结果是不一样的，但数据类型都是向量

+ 矩阵乘以向量

  ```js
  mat4 m=mat4(
      1,5,9,13,
      2,6,10,14,
      3,7,11,15,
      4,8,12,16
  );
  vec4 p=vec4(1,2,3,4);
  vec4 v=m*p;

  /*
      [30, 70, 110, 150]
  */
  ```

  ```js
  v.x=m[0][0]*v.x+m[1][0]*v.y+m[2][0]*v.z+m[3][0]*v.w
  v.x=1*1+2*2+3*3+4*4
  v.x=1+4+9+16
  v.x=30
  ```

+ 向量乘以矩阵

  ```js
  vec4 v=p*m;

  /*
      [90, 100, 110, 120]
  */
  ```

  ```js
  v.x=m[0][0]*v.x+m[1][0]*v.y+m[2][0]*v.z+m[3][0]*v.w
  v.x=1*1+2*5+3*9+4*13
  v.x=90
  ```










